import { useState as l, useEffect as u, useRef as s } from "react";
function p(e, t) {
  const [c, n] = l(e);
  return u(() => {
    if (typeof window < "u") {
      const r = setTimeout(() => {
        n(e);
      }, t);
      return () => {
        clearTimeout(r);
      };
    }
  }, [e, t]), c;
}
function a({
  data: e,
  onSave: t,
  interval: c = 2e3,
  saveOnUnmount: n = !0
}) {
  const r = s(e), i = s(!0), o = s(t), f = p(e, c);
  u(() => {
    i.current ? i.current = !1 : o.current(f);
  }, [f]), u(() => {
    r.current = e;
  }, [e]), u(() => {
    o.current = t;
  }, [t]), u(
    () => () => {
      n && o.current(r.current);
    },
    [n]
  );
}
const m = ({
  element: e = null,
  ...t
}) => (a(t), e);
export {
  m as Autosave,
  a as useAutosave,
  p as useDebounce
};
